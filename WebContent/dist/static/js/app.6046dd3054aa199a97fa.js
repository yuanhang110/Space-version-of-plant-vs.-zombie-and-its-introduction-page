webpackJsonp([0],{Abky:function(e,t){},DpKt:function(e,t){},NHnr:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i("7+uW"),a={data:function(){return{gameWidth:640,gameHeight:1e3,cjs:null,canvas:null,stage:null,lives:20,energies:99999,assetsLib:null,enemyList:[],energyList:[],satelliteList:[],bulletList:[],castleList:[],waves:{}}},mounted:function(){this.init()},methods:{init:function(){this.cjs=window.createjs,this.assetsLib=window.assetsLib,this.images=window.images,this.canvas=document.getElementById("canvas"),this.stage=new this.cjs.Stage(this.canvas),this.bgLayer=new this.cjs.Container,this.bgLayer.addChild(new this.assetsLib.Background),this.stage.addChild(this.bgLayer),this.boardLayer=this.Board(),this.stage.addChild(this.boardLayer),this.effectLayer=new this.cjs.Container,this.stage.addChild(this.effectLayer),this.setHud(),this.stage.on("click",this.stageClick),this.load(),this.cjs.Ticker.setFPS(40),this.cjs.Ticker.addEventListener("tick",this.stage),this.cjs.Ticker.addEventListener("tick",this.tick)},load:function(){var e=new this.cjs.LoadQueue(!1);e.addEventListener("fileload",function(e){"image"===e.item.type&&(this.images[e.item.id]=e.result)}.bind(this)),e.addEventListener("complete",this.start),e.loadManifest(this.assetsLib.properties.manifest)},start:function(){this.initWaves(),this.startWave()},initWaves:function(){console.log("begin init wave"),this.waves.nextWave=0,this.waves.isActive=!1,this.waves.enemySummonOrder=["EnemyDummy","Enemy1","Enemy2","Enemy3","Boss","Boss2"],console.log("init wave data"),this.waves.data=[{EnemyDummy:1,frequency:10},{EnemyDummy:8,Enemy1:5,Enemy2:5,Boss:2,frequency:150},{EnemyDummy:1,Enemy1:1,Enemy2:1,Enemy3:1,Boss:1,Boss2:30,frequency:50}],console.log("init wave sprite"),this.nextWaveSprite=new this.assetsLib.WaveCleared,this.stage.addChild(this.nextWaveSprite),this.nextWaveSprite.x=999},startWave:function(){this.energies=120,this.waves.currentWave=this.waves.data[this.waves.nextWave],this.waves.isActive=!0,this.waves.enemiesSummoned=0},wavesCleared:function(){this.waves.nextWave+=1,this.waves.nextWave>=this.waves.data.length&&(this.waves.nextWave=this.waves.data.length-1)},waveTick:function(){if(this.waves.isActive&&this.cjs.Ticker.getTicks()%this.waves.currentWave.frequency==0){for(var e=0,t=0,i=this.waves.enemySummonOrder.length;t<i;t++){var s=this.waves.enemySummonOrder[t];if(e+=this.waves.currentWave[s]||0,this.waves.enemiesSummoned<e)break}this.waves.enemiesSummoned>=e?this.waves.isActive=!1:(this.addEnemy(s),this.waves.enemiesSummoned+=1)}},stageClick:function(){console.log("stage click")},tick:function(){this.cjs.Ticker.getPaused()||(this.livesSpan.textContent=this.lives,this.energiesSpan.textContent=this.energies,this.wavesSpan.textContent=this.waves.nextWave+1,this.boardTick(),this.waveTick(),!1===this.waves.isActive&&this.areEnemiesCleared()&&(this.boardLayer.isAddingBuilding=!1,this.removeAllBuildings(),this.removeAllBullets(),this.wavesCleared(),this.cjs.Tween.get(this.nextWaveSprite).to({x:this.canvas.width/2,y:this.canvas.height/2,alpha:0}).to({alpha:1},300).wait(1e3).to({alpha:0},300).to({x:999}),this.startWave()))},removeAllBuildings:function(){for(var e=0;e<this.boardLayer.cols;e++)for(var t=0;t<this.boardLayer.rows;t++)this.removeBuilding(this.boardLayer.buildingMap[e][t]);this.satelliteList=[],this.castleList=[]},areEnemiesCleared:function(){return 0===this.enemyList.length},removeAllBullets:function(){this.bulletList.length=0,this.effectLayer.removeAllChildren()},Board:function(){var e=new this.cjs.Container;e.x=10,e.y=60,e.rows=10,e.cols=7,this.tileWidth=87,this.tileHeight=83;var t=new this.assetsLib.Board;return e.addChild(t),t.y=e.tileHeight,e.selection=new this.assetsLib.Selection,e.addChild(e.selection),e.selection.visible=!1,e.isAddingBuilding=!1,e.buildingMap=this.create2DArray(e.cols,e.rows),this.stage.on("stagemousemove",this.onStageMouseMove),this.stage.on("stagemouseup",this.onStageClick),e},boardTick:function(){this.enemyMap=this.create2DArray(this.boardLayer.cols,this.boardLayer.rows);for(var e=0;e<this.enemyList.length;e++){var t=this.enemyList[e],i=this.screenToRowCol(t.x,t.y);this.enemyMap[i.col][i.row]=t,t.col=i.col,t.row=i.row,this.enemyTick(t)}var s;for(e=0,s=this.enemyMap.length;e<s;e++)if(void 0!==this.enemyMap[e][this.boardLayer.rows]){var a=this.enemyMap[e][this.boardLayer.rows];this.lives-=1,this.removeItem(this.enemyList,a),a.parent&&a.parent.removeChild(a)}for(this.satelliteTick(),this.enemyAttackBuilding(),this.castleTick(),e=this.enemyList.length-1;e>=0;e--)for(var n=this.bulletList.length-1;n>=0;n--){var r=this.bulletList[n],o=r.localToLocal(0,0,this.effectLayer);if(i=this.screenToRowCol(o.x,o.y),void 0!==this.enemyMap[i.col][i.row]){var l=this.enemyMap[i.col][i.row];this.enemyDamage(l,r.damageDeal),l.hp<=0&&(this.enemyMap[i.col][i.row]=void 0,this.removeItem(this.enemyList,l),this.boardLayer.removeChild(l)),this.removeItem(this.bulletList,r),this.effectLayer.removeChild(r)}}},addEnemy:function(e){var t=null;switch(e){case"EnemyDummy":t=this.enemyDummy();break;case"Boss":t=this.boss();break;case"Boss2":t=this.boss2();break;case"Enemy1":t=this.enemy1();break;case"Enemy2":t=this.enemy2();break;case"Enemy3":t=this.enemy3()}if(null!==t){this.boardLayer.addChild(t);var i=Math.floor(Math.random()*this.boardLayer.cols),s=this.rowColToScreen(0,i);t.x=s.x,t.y=s.y,t.row=0,t.col=i,this.enemyList.push(t)}},addButtonOnMouseDown:function(e){if(!this.cjs.Ticker.getPaused()){var t=e.target.dataset.type,i=this.getBuildingCostByType(t);this.energies>=i&&(this.energies-=i,this.buildingType=t,this.readyToPlaceBuilding(t))}},setHud:function(){var e=document.querySelectorAll(".add-button");this.livesSpan=document.getElementById("lives"),this.energiesSpan=document.getElementById("energies"),this.wavesSpan=document.getElementById("waves");for(var t=0,i=e.length;t<i;t++){e[t].onmousedown=this.addButtonOnMouseDown}},getBuildingCostByType:function(e){return this.getBuilding(e).cost},readyToPlaceBuilding:function(e){this.boardLayer.upcomingBuildingType=e,this.boardLayer.isAddingBuilding=!0},create2DArray:function(e,t,i){for(var s=[],a=0;a<e;a++){s[a]=[];for(var n=0;n<t;n++)s[a][n]=i}return s},building:function(){var e=new this.cjs.Container;return e.cost=10,e.shield=10,e.damageDeal=0,e.attackSpeed=9999,e},buildingDamage:function(e,t){var i=Math.max(t,e.shield,0);e.hp-=i,e.hp<=0&&e.parent&&this.removeBuilding(e)},removeBuilding:function(e){if(void 0!==e){this.boardLayer.buildingMap[e.col][e.row]=void 0,this.boardLayer.removeChild(e);for(var t=0;t<this.satelliteList.length;t++)if(this.satelliteList[t]===e){this.satelliteList.splice(t,1);break}for(t=0;t<this.castleList.length;t++)if(this.castleList[t]===e){this.castleList.splice(t,1);break}}},enemyAttackBuilding:function(){for(var e=this.enemyList.length-1;e>=0;e--){var t,i=this.enemyList[e],s=i.row,a=i.col;void 0!==this.boardLayer.buildingMap[a][s]?t=this.boardLayer.buildingMap[a][s]:void 0!==this.boardLayer.buildingMap[a][s+1]&&(t=this.boardLayer.buildingMap[a][s]),void 0!==t?(i.speed-=i.deceleration,this.enemyStartAttack(i,t)):this.enemyStopAttack(i),t=void 0}},enemyStartAttack:function(e,t){e.isAttacking||(e.isAttacking=!0,e.addChild(e.attackingSmoke)),e.attackingTarget=t},enemyStopAttack:function(e){e.isAttacking&&e.removeChild(e.attackingSmoke),e.isAttacking=!1,e.attackingTarget=void 0,e.speed=e.originalSpeed},satellite:function(){var e=this.building();return e.addChild(new this.assetsLib.Satellite),e.cache(-50,-50,100,100),e.hp=150,e.cost=30,e.ticks=0,e.energyFrequency=500,this.satelliteList.push(e),e},satelliteTick:function(){for(var e=0;e<this.satelliteList.length;e++){var t=this.satelliteList[e];t.ticks+=1,t.ticks%t.energyFrequency==0&&this.summonEnergy(t)}for(e=0;e<this.energyList.length;e++)this.energyTick(this.energyList[e])},summonEnergy:function(e){var t=e.localToLocal(0,0,this.effectLayer),i=this.energy(t.x,t.y);this.effectLayer.addChild(i)},satellite2:function(){var e=this.building();return e.addChild(new this.assetsLib.Satellite2),e.cache(-50,-50,100,100),e.hp=150,e.cost=600,e.energyFrequency=100,e.ticks=0,this.satelliteList.push(e),e},castle:function(){var e=this.building();return e.addChild(new this.assetsLib.Castle),e.hp=300,e.shield=5,e.damageDeal=2,e.attackSpeed=120,e.cost=80,e.tick=0,this.castleList.push(e),e},castle2:function(){var e=this.building();return e.addChild(new this.assetsLib.Castle2),e.cache(-50,-50,100,100),e.hp=300,e.shield=10,e.damageDeal=10,e.attackSpeed=200,e.cost=300,e.tick=0,this.castleList.push(e),e},castleTick:function(){if(!this.cjs.Ticker.getPaused()){for(var e=0;e<this.castleList.length;e++){var t=this.castleList[e];t.tick+=1,t.tick%t.attackSpeed==0&&this.summonBullet(t)}for(e=0;e<this.bulletList.length;e++)this.bulletTick(this.bulletList[e])}},summonBullet:function(e){var t=this.bullet(e.damageDeal);t.x=Math.abs(e.x+20*Math.random()-10),t.y=e.y,this.addBullet(t)},addBullet:function(e){this.effectLayer.addChild(e),this.bulletList.push(e)},spaceJunk:function(){var e=this.building();return e.addChild(new this.assetsLib.SpaceJunk),e.hp=60,e.cost=5,e},screenToRowCol:function(e,t){return{col:Math.floor(e/this.tileWidth),row:Math.floor(t/this.tileHeight)}},rowColToScreen:function(e,t){return{x:this.tileWidth*(t+.5),y:this.tileHeight*(e+.5)}},getBuilding:function(e){return"SpaceJunk"===e?(console.log("build SpaceJunk"),this.spaceJunk()):"Satellite"===e?(console.log("build Satellite"),this.satellite()):"Satellite2"===e?this.satellite2():"Castle"===e?this.castle():"Castle2"===e?this.castle2():null},addBuildingAtTile:function(e,t,i){var s=this.getBuilding(e);this.boardLayer.addChild(s);var a=this.rowColToScreen(i,t);s.x=a.x,s.y=a.y,s.row=i,s.col=t,this.boardLayer.buildingMap[t][i]=s},onStageMouseMove:function(e){if(this.boardLayer.isAddingBuilding){var t=this.boardLayer.globalToLocal(e.stageX,e.stageY),i=this.screenToRowCol(t.x,t.y);t=this.rowColToScreen(i.row,i.col),this.boardLayer.selection.visible=!0,this.boardLayer.selection.x=t.x,this.boardLayer.selection.y=t.y}},onStageClick:function(e){if(this.boardLayer.isAddingBuilding){var t=this.boardLayer.globalToLocal(e.stageX,e.stageY),i=this.screenToRowCol(t.x,t.y),s=i.row,a=i.col;s<0||s>=this.boardLayer.rows||a<0||a>=this.boardLayer.cols||void 0===this.boardLayer.buildingMap[a][s]&&(this.addBuildingAtTile(this.boardLayer.upcomingBuildingType,a,s),this.boardLayer.isAddingBuilding=!1,this.boardLayer.selection.visible=!1)}},removeItem:function(e,t){for(var i=0;i<e.length;i++)if(e[i]===t)return e.splice(i,1),!0;return!1},enemy:function(){var e=new this.cjs.Container;return e.originalSpeed=.5,e.deceleration=.4,e.hp=10,e.damageDeal=10,e.attackSpeed=100,e.speed=e.originalSpeed,e.isAttacking=!1,e.attackingTarget=void 0,e.attackingSmoke=new this.assetsLib.Explode,e.attackingSmoke.y=50,e},enemyTick:function(e){this.cjs.Ticker.getPaused()||(e.speed<0&&(e.speed=0),e.y+=e.speed,this.cjs.Ticker.getTicks()%e.attackSpeed==0&&e.isAttacking&&e.attackingTarget&&this.buildingDamage(e.attackingTarget,e.damageDeal))},enemyDamage:function(e,t){e.hp-=t},enemyDummy:function(){var e=this.enemy();return e.addChild(new this.assetsLib.Enemy1),e.originalSpeed=.3,e.deceleration=.002,e.hp=1,e.speed=e.originalSpeed,e.name="dummy",e},boss:function(){var e=this.enemy();return e.addChild(new this.assetsLib.Boss),e.originalSpeed=.2,e.deceleration=.002,e.hp=300,e.attackSpeed=50,e.name="boss",e},enemy1:function(){console.log("enemy1");var e=this.enemy();return e.addChild(new this.assetsLib.Enemy1),e.attackSpeed=50,e.speed=e.originalSpeed,e.name="enemy1",e},enemy2:function(){console.log("enemy2");var e=this.enemy();return e.addChild(new this.assetsLib.Enemy2),e.originalSpeed=1,e.attackSpeed=40,e.hp=8,e.deceleration=.008,e.speed=e.originalSpeed,e.name="enemy2",e},boss2:function(){var e=this.enemy();return e.addChild(new this.assetsLib.Boss2),e.originalSpeed=.2,e.deceleration=.002,e.hp=300,e.attackSpeed=50,e.name="boss",e},enemy3:function(){console.log("enemy3");var e=this.enemy();return e.addChild(new this.assetsLib.Enemy3),e.originalSpeed=3,e.attackSpeed=10,e.hp=8,e.deceleration=.002,e.speed=e.originalSpeed,e.name="enemy3",e},energy:function(e,t){var i=new this.cjs.Container;return i.addChild(new this.assetsLib.Energy),i.cache(-25,-25,50,50),i.x=e||0,i.y=t||0,i.baseX=i.x,this.cjs.Tween.get(i,{loop:!0}).to({scaleX:1.2,scaleY:1.2},600).to({scaleX:1,scaleY:1},600),i.on("mousedown",this.energyClick),this.energyList.push(i),i},energyTick:function(e){if(!this.cjs.Ticker.getPaused()){var t=20*Math.sin(this.cjs.Ticker.getTicks()/10);e.x=e.baseX+t,e.y-=.5}},energyClick:function(e){this.energies+=100,this.removeItem(this.energyList,e.currentTarget),e.currentTarget.parent.removeChild(e.currentTarget)},bullet:function(e){var t=new this.cjs.Container;return t.addChild(new this.assetsLib.Bullet),t.cache(-25,-25,50,50),t.damageDeal=1|e,t},bulletTick:function(e){this.cjs.Ticker.getPaused()||(e.y-=1.5)}}},n={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("section",{staticClass:"row",attrs:{id:"game"}},[i("canvas",{attrs:{id:"canvas",width:"640",height:"1000"}}),e._v(" "),i("div",{attrs:{id:"hud"}},[i("div",[e._v("Lives: "),i("span",{attrs:{id:"lives"}})]),e._v(" "),i("div",[e._v("E: "),i("span",{attrs:{id:"energies"}})]),e._v(" "),i("div",[e._v("Waves: "),i("span",{attrs:{id:"waves"}})])]),e._v(" "),i("div",{staticClass:"add-buttons"},[i("a",{staticClass:"add-button",attrs:{title:"space Junk","data-type":"SpaceJunk"}},[e._v("J")]),e._v(" "),i("a",{staticClass:"add-button",attrs:{title:"Satellite","data-type":"Satellite"}},[e._v("S")]),e._v(" "),i("a",{staticClass:"add-button",attrs:{title:"Satellite+","data-type":"Satellite2"}},[e._v("S+")]),e._v(" "),i("a",{staticClass:"add-button",attrs:{title:"Castle","data-type":"Castle"}},[e._v("C")]),e._v(" "),i("a",{staticClass:"add-button",attrs:{title:"Castle+","data-type":"Castle2"}},[e._v("C+")])])])}]};var r={components:{GameScene:i("VU/8")(a,n,!1,function(e){i("gLPP")},"data-v-d91fd990",null).exports}},o={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[this._m(0),this._v(" "),t("div",[t("game-scene")],1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("header",[t("div",{staticClass:"row"},[t("h1",[this._v("Space Defender")])])])}]};var l={name:"app",components:{GameContainer:i("VU/8")(r,o,!1,function(e){i("laev")},"data-v-21d4df72",null).exports}},h={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("game-container")],1)},staticRenderFns:[]};var c=i("VU/8")(l,h,!1,function(e){i("DpKt")},null,null).exports,d=i("/ocq"),u={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"hello"},[i("h1",[e._v(e._s(e.msg))]),e._v(" "),i("h2",[e._v("Essential Links")]),e._v(" "),e._m(0),e._v(" "),i("h2",[e._v("Ecosystem")]),e._v(" "),e._m(1)])},staticRenderFns:[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ul",[i("li",[i("a",{attrs:{href:"https://vuejs.org",target:"_blank"}},[e._v("Core Docs")])]),e._v(" "),i("li",[i("a",{attrs:{href:"https://forum.vuejs.org",target:"_blank"}},[e._v("Forum")])]),e._v(" "),i("li",[i("a",{attrs:{href:"https://gitter.im/vuejs/vue",target:"_blank"}},[e._v("Gitter Chat")])]),e._v(" "),i("li",[i("a",{attrs:{href:"https://twitter.com/vuejs",target:"_blank"}},[e._v("Twitter")])]),e._v(" "),i("br"),e._v(" "),i("li",[i("a",{attrs:{href:"http://vuejs-templates.github.io/webpack/",target:"_blank"}},[e._v("Docs for This Template")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("ul",[t("li",[t("a",{attrs:{href:"http://router.vuejs.org/",target:"_blank"}},[this._v("vue-router")])]),this._v(" "),t("li",[t("a",{attrs:{href:"http://vuex.vuejs.org/",target:"_blank"}},[this._v("vuex")])]),this._v(" "),t("li",[t("a",{attrs:{href:"http://vue-loader.vuejs.org/",target:"_blank"}},[this._v("vue-loader")])]),this._v(" "),t("li",[t("a",{attrs:{href:"https://github.com/vuejs/awesome-vue",target:"_blank"}},[this._v("awesome-vue")])])])}]};var v=i("VU/8")({name:"hello",data:function(){return{msg:"Welcome to Your Vue.js App"}}},u,!1,function(e){i("Abky")},"data-v-0ee2c0a1",null).exports;s.a.use(d.a);var g=new d.a({routes:[{path:"/",name:"Hello",component:v}]});s.a.config.productionTip=!1,new s.a({el:"#app",router:g,components:{App:c},template:"<App/>"})},gLPP:function(e,t){},laev:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.6046dd3054aa199a97fa.js.map